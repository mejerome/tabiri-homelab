# Tabiri Homelab Environment Configuration Template
# 
# This file contains all environment variables used across the homelab.
# Copy this file to .env and update the values for your environment.
# 
# WARNING: Never commit actual values to version control!
#          This file should only contain example values.

# =============================================================================
# Global Configuration
# =============================================================================

# Project and domain settings
COMPOSE_PROJECT_NAME=tabiri-homelab
DOMAIN_NAME=your-domain.com
LETSENCRYPT_EMAIL=admin@your-domain.com

# Timezone and locale
TZ=UTC
LANG=en_US.UTF-8

# =============================================================================
# NetBird VPN Configuration
# =============================================================================

# NetBird Management Settings
NETBIRD_MANAGEMENT_URL=https://netbird.your-domain.com
NETBIRD_DNS_DOMAIN=netbird.your-domain.com
NETBIRD_SINGLE_ACCOUNT_MODE_DOMAIN=netbird.your-domain.com

# Zitadel Identity Provider
ZITADEL_DOMAIN=zitadel.your-domain.com
ZITADEL_EXTERNAL_DOMAIN=zitadel.your-domain.com
ZITADEL_EXTERNAL_PORT=443
ZITADEL_MASTERKEY=your-secure-master-key-here

# Database Configuration (PostgreSQL for Zitadel)
POSTGRES_DB=zitadel
POSTGRES_USER=zitadel
POSTGRES_PASSWORD=your-secure-db-password-here
POSTGRES_HOST=zdb
POSTGRES_PORT=5432

# Dashboard Configuration
DASHBOARD_BACKEND_URL=https://netbird.your-domain.com
DASHBOARD_AUTH_CLIENT_ID=your-auth-client-id
DASHBOARD_AUTH_AUTHORITY=https://zitadel.your-domain.com

# Relay Configuration
RELAY_STUN_PORT=3478
RELAY_TURN_PORT=3478
RELAY_TURN_USERNAME=turn-user
RELAY_TURN_PASSWORD=your-secure-turn-password

# =============================================================================
# Reverse Proxy Configuration
# =============================================================================

# Traefik Settings
TRAEFIK_DASHBOARD_DOMAIN=traefik.your-domain.com
TRAEFIK_API_INSECURE=false
TRAEFIK_CERTIFICATESRESOLVERS_LETSENCRYPT_ACME_EMAIL=admin@your-domain.com

# Nginx Proxy Manager
NGINX_PROXY_MANAGER_DB_SQLITE_FILE=/data/database.sqlite
NGINX_PROXY_MANAGER_DISABLE_IPV6=false

# =============================================================================
# Application Services
# =============================================================================

# NextCloud Configuration
NEXTCLOUD_DOMAIN=nextcloud.your-domain.com
NEXTCLOUD_ADMIN_USER=admin
NEXTCLOUD_ADMIN_PASSWORD=your-secure-admin-password
NEXTCLOUD_TRUSTED_DOMAINS=nextcloud.your-domain.com
NEXTCLOUD_DATABASE_HOST=nextcloud-db
NEXTCLOUD_DATABASE_USER=nextcloud
NEXTCLOUD_DATABASE_PASSWORD=your-secure-db-password
NEXTCLOUD_DATABASE_NAME=nextcloud

# Airflow Configuration
AIRFLOW_UID=50000
AIRFLOW_GID=50000
AIRFLOW__CORE__EXECUTOR=CeleryExecutor
AIRFLOW__CORE__SQL_ALCHEMY_CONN=postgresql+psycopg2://airflow:your-secure-password@airflow-db:5432/airflow
AIRFLOW__CELERY__RESULT_BACKEND=db+postgresql://airflow:your-secure-password@airflow-db:5432/airflow
AIRFLOW__CELERY__BROKER_URL=redis://:your-secure-redis-password@airflow-redis:6379/0

# Semaphore (Ansible) Configuration
SEMAPHORE_DB_HOST=semaphore-db
SEMAPHORE_DB_PORT=3306
SEMAPHORE_DB_USER=semaphore
SEMAPHORE_DB_PASS=your-secure-db-password
SEMAPHORE_DB_NAME=semaphore
SEMAPHORE_ADMIN=admin
SEMAPHORE_ADMIN_EMAIL=admin@your-domain.com
SEMAPHORE_ADMIN_NAME="Homelab Admin"
SEMAPHORE_ADMIN_PASSWORD=your-secure-admin-password

# =============================================================================
# Monitoring Stack
# =============================================================================

# Prometheus Configuration
PROMETHEUS_CONFIG_FILE=/etc/prometheus/prometheus.yml
PROMETHEUS_STORAGE_TSDB_RETENTION_TIME=15d
PROMETHEUS_STORAGE_TSDB_RETENTION_SIZE=10GB

# Grafana Configuration
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=your-secure-admin-password
GF_INSTALL_PLUGINS=grafana-clock-panel,grafana-simple-json-datasource

# =============================================================================
# Database Services
# =============================================================================

# MySQL/MariaDB Defaults
MYSQL_ROOT_PASSWORD=your-secure-root-password
MYSQL_DATABASE=homelab
MYSQL_USER=homelab
MYSQL_PASSWORD=your-secure-db-password

# PostgreSQL Defaults
POSTGRES_ROOT_PASSWORD=your-secure-root-password
POSTGRES_DB=homelab
POSTGRES_USER=homelab
POSTGRES_PASSWORD=your-secure-db-password

# Redis Defaults
REDIS_PASSWORD=your-secure-redis-password

# =============================================================================
# External Services & API Keys
# =============================================================================

# Cloudflare (if using for DNS)
CLOUDFLARE_API_KEY=your-cloudflare-api-key
CLOUDFLARE_EMAIL=your-cloudflare-email@domain.com
CLOUDFLARE_ZONE_ID=your-zone-id

# AWS Configuration (for Terraform)
AWS_ACCESS_KEY_ID=your-aws-access-key-id
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key
AWS_DEFAULT_REGION=us-east-1
AWS_PROFILE=default

# SMTP Configuration (for notifications)
SMTP_HOST=smtp.your-domain.com
SMTP_PORT=587
SMTP_USERNAME=your-smtp-username
SMTP_PASSWORD=your-smtp-password
SMTP_FROM_EMAIL=noreply@your-domain.com
SMTP_TLS=true

# =============================================================================
# Security & Authentication
# =============================================================================

# JWT Secrets (generate unique values for each)
JWT_SECRET=your-jwt-secret-key-here
SESSION_SECRET=your-session-secret-key-here
ENCRYPTION_KEY=your-encryption-key-here

# OAuth Configuration (if using external providers)
OAUTH_GOOGLE_CLIENT_ID=your-google-client-id
OAUTH_GOOGLE_CLIENT_SECRET=your-google-client-secret
OAUTH_GITHUB_CLIENT_ID=your-github-client-id
OAUTH_GITHUB_CLIENT_SECRET=your-github-client-secret

# =============================================================================
# Backup & Storage
# =============================================================================

# Backup Configuration
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_STORAGE_PATH=/home/ec2-user/backups

# S3 Backup Storage (optional)
AWS_BACKUP_BUCKET=your-backup-bucket-name
AWS_BACKUP_REGION=us-east-1

# =============================================================================
# Network & Port Configuration
# =============================================================================

# Default ports for services (modify if conflicts exist)
TRAEFIK_PORT=8080
NGINX_PROXY_MANAGER_PORT=8181
PORTAINER_PORT=9000
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000
NEXTCLOUD_PORT=8080
AIRFLOW_PORT=8080
SEMAPHORE_PORT=3000

# VPN and Networking
WIREGUARD_PORT=51820
NETBIRD_SIGNAL_PORT=10000
NETBIRD_MANAGEMENT_PORT=33073
NETBIRD_DASHBOARD_PORT=33080

# =============================================================================
# Development & Debugging
# =============================================================================

# Logging Levels
LOG_LEVEL=INFO
DEBUG=false
DEVELOPMENT_MODE=false

# Feature Flags
ENABLE_METRICS=true
ENABLE_TRACING=false
ENABLE_PROFILING=false

# =============================================================================
# Service-Specific Variables
# =============================================================================

# Portainer
PORTAINER_ADMIN_PASSWORD=your-secure-admin-password

# JDownloader
JDOWNLOADER_EMAIL=your-jdownloader-email
JDOWNLOADER_PASSWORD=your-jdownloader-password

# Agent Zero (if used)
AGENT_ZERO_API_KEY=your-agent-zero-api-key
AGENT_ZERO_SECRET=your-agent-zero-secret

# =============================================================================
# Notes for Configuration
# =============================================================================

# 1. Generate secure passwords using:
#    openssl rand -base64 32
#    or
#    pwgen -s 32 1

# 2. Update domain names to match your actual domains

# 3. Set appropriate timezone (TZ) for your location

# 4. Review and adjust port assignments to avoid conflicts

# 5. Test backup configuration regularly

# 6. Monitor resource usage and adjust as needed

# 7. Keep this file secure and never commit to version control
